{% macro paneled_tabs(tabs, tab_contents, selected, title) %}
<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        {%  if title %}<span class="nav-tab-title pull-left">{{- title -}}</span>{% endif %}
        <ul class="nav nav-tabs" role="tablist">
            {% for key, tab in tabs %}
                {%  set active = '' %}
                {%  if selected == key %}{%  set active = 'class="active"' %}{% endif %}
                <li role="presentation" {{- active|raw -}}><a href="#{{- key -}}" aria-controls="{{- key -}}" role="tab" data-toggle="tab">{{- tab|raw -}}</a></li>
            {% endfor %}
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
        {% for key, tab in tab_contents %}
            {%  set active = '' %}
            {%  if selected == key %}{%  set active = ' active' %}{% endif %}
            <div role="tabpanel" class="tab-pane {{- active -}}" id="{{- key -}}">{{ tab|raw }}</div>
        {% endfor %}
        </div>
    </div>
</div>
{% endmacro %}